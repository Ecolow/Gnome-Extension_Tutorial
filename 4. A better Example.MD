### A practical example :

    const Main = imports.ui.main; 

    const PanelMenu = imports.ui.panelMenu; 
    const PopupMenu = imports.ui.popupMenu;

    const St = imports.gi.St;

    const Lang = imports.lang;


    const HelloWorld_Indicator = new Lang.Class({
        Name: 'HelloWorld.indicator',
        Extends: PanelMenu.Button   ,
 
          _init: function(){
              this.parent(0.0);

              let label = new St.Label({text: 'Button'});
              this.actor.add_child(label);

              let menuItem = new PopupMenu.PopupMenuItem('Menu Item');
              menuItem.actor.connect('button-press-event', function(){ Main.notify('Example Notification', 'Hello World !') });

              this.menu.addMenuItem(menuItem);
          }
    });


    function init() {
        log ('Example extension initalized');
    };  

    function enable() {
        log ('Example extension enabled');

        let _indicator =  new HelloWorld_Indicator(); 
        Main.panel._addToPanelBox('HelloWorld', _indicator, 1, Main.panel._rightBox);
    };

    function disable(){
        log ('Example extension disabled');

        _indicator.destroy();
    };
    
### Imports 
        const Main = imports.ui.main; 

        const PanelMenu = imports.ui.panelMenu; 
        const PopupMenu = imports.ui.popupMenu;

        const St = imports.gi.St;

        const Lang = imports.lang;
        
### Extending PanelMenu.Button
Parameters : menuAlignment, nameText, dontCreateMenu.

Inheriting from PanelMenu.ButtonBox, a button actor, reactive to clicks, mouse hover and keyboard inputs, is accessible via this.actor. It is composed of a Shell.GenericContainer() into wich you can add a single St element, like for example a St.Label(), St.Icon() or St.Entry(). 
To compose a button with 2 or more St element, you will have to create  a St container, add to it your elements and finaly add the container to this.actor like so :

        // Create a St container
          let box = new St.BoxLayout();

        // Create your UI elements
          this.Label = new St.Label({text: "Hello World"});
          let Icon = new St.Icon({ icon_name: 'system-run-symbolic',
                                  style_class: 'system-status-icon' });

       // Add your elements to the container
          box.add_actor(this.Label)
          box.add_actor(Icon)

       // Than add the container to the actor
          this.actor.add_child(box);
    
PanelMenu.Button adds a PopupDummyMenu to the ButtonBox accessible at this.menu. Essentialy, a menu constuctor to wich we can add any PopupMenuItems, see the next section. 


### PopupMenuItems
Any popup menu item is essentialy like a PanelMenu.ButtonBox designed to be added to a dummy menu.

PopupBaseMenuItem: Base class for popup menu items - an empty popup menu item. Has an 'activate' signal that gets fired when the item is activated. Use .addActor to add visual elements to it (like a St.Label). All the other PopupMenuItem classes inherit from this (and respond to the 'activate' signal).

PopupMenuItem: A PopupBaseMenuItem to wich you can pass string to be displayed at it's creation :

    let menuItem = new PopupMenu.PopupMenuItem("hello world");
    
PopupSeparatorMenuItem: A PopupBaseMenuItem that is a separator.

PopupAlternatingMenuItem: A PopupBaseMenuItem that has two texts - one that shows by default, and one that appears upon pressing Clutter.ModifierType.MOD1_MASK (Alt for me). The alternating 'Suspend...'/'Power off' menu item in the user menu is one of these.

Switch: An on-off toggle switch (not a PopupBaseMenuItem; see PopupSwitchMenuItem for that).
PopupSwitchMenuItem: A PopupBaseMenuItem containing a label/text and a Switch to the right. Example: Wifi/wired connection on/off switch in the network menu. Use the 'toggled' signal to determine when the user toggles it.

PopupImageMenuItem: A PopupBaseMenuItem containing a label/text and an icon to the right. Example: in the network menu, available wifi networks have the network name and an icon indicating connection strength.
PopupSubMenuMenuItem: A PopupBaseMenuItem defining a collapsible submenu - click on it to expand/open the submenu and reveal the items inside. Is really just a PopupBaseMenuItem with a label and a PopupSubMenu. Use myItem.menu.addMenuItem to add to its menu.

PopupComboBoxMenuItem: A PopupBaseMenuItem that is a combo box. Example: the chat status combo box (available/offline) in the user menu. Use myItem.addMenuItem(item) to add a choice to the combo box, and myItem.setActiveItem to set the active item. When a selection is changed, it emits signal active-item-changed with the (0-based) index of the activated item.
Menus:

PopupSubMenu: A collapsible menu section designed to be nested within a PopupMenu, has a scrollbar in case the content is too long. If you want to add it to a PopupMenu as a collapsible menu section, use PopupSubMenuMenuItem.
Just like a dummy menu, you can add to it any PopupMenuItems.

PopupMenuManager: "Basic implementation of a menu manager. Call addMenu to add menus". I think you use this if you want to manage multiple menus (???). For example, all the status area menus and the date menu appear to have the same manager (Main.panel._menus). It also looks like it handles the menus grabbing focus, responding to key events, etc.
